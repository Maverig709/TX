* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: system-ui, -apple-system, sans-serif; background: #0d1117; color: #e6edf3; min-height: 100vh; }
#app { max-width: 600px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; }

.panel { padding: 1.5rem; flex: 1; display: flex; flex-direction: column; }
.panel.hidden { display: none !important; }

/* Join screen */
#join { justify-content: center; align-items: center; text-align: center; }
#join h1 { font-size: 2.5rem; font-weight: 700; color: #58a6ff; margin-bottom: 0.25rem; }
.tagline { color: #8b949e; font-size: 0.9rem; margin-bottom: 2rem; }
#joinForm { display: flex; flex-direction: column; gap: 0.75rem; width: 100%; max-width: 280px; }
#joinForm input { padding: 0.6rem 0.9rem; border-radius: 8px; border: 1px solid #30363d; background: #21262d; color: inherit; font-size: 1rem; }
#joinForm input::placeholder { color: #6e7681; }
#joinForm input:focus { outline: none; border-color: #58a6ff; }
#joinForm button { padding: 0.6rem; border-radius: 8px; border: none; background: #238636; color: white; font-weight: 600; cursor: pointer; font-size: 1rem; }
#joinForm button:hover { background: #2ea043; }

/* Chat header */
header { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; border-bottom: 1px solid #21262d; background: #161b22; }
.icon-btn { width: 36px; height: 36px; border-radius: 8px; border: none; background: #21262d; color: inherit; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.icon-btn:hover { background: #30363d; }
.icon-btn.active { background: #238636; }
.icon-btn.muted { background: #da3633; }
.icon-btn.hidden { display: none; }
.icon-btn.in-call { background: #238636; }
#back { font-size: 1.2rem; }
.header-info { flex: 1; }
.header-info span { font-weight: 600; }
.user-count { font-size: 0.8rem; color: #8b949e; font-weight: 400; margin-left: 0.5rem; }
.connection-status { font-size: 0.75rem; color: #8b949e; }
.connection-status.error { color: #f85149; }
.call-controls { display: flex; gap: 0.25rem; }

/* Messages */
.messages { flex: 1; overflow-y: auto; padding: 1rem; display: flex; flex-direction: column; gap: 0.75rem; min-height: 200px; position: relative; }
.messages.dragover { background: rgba(88, 166, 255, 0.08); outline: 2px dashed #58a6ff; }
.drop-hint { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #6e7681; font-size: 0.9rem; pointer-events: none; opacity: 0; }
.messages.dragover .drop-hint { opacity: 1; }

.msg { display: flex; flex-direction: column; gap: 0.25rem; max-width: 85%; word-wrap: break-word; }
.msg.mine { align-self: flex-end; }
.msg.other { align-self: flex-start; }
.msg-name { font-size: 0.75rem; color: #8b949e; }
.msg.mine .msg-name { text-align: right; }
.msg-content { padding: 0.5rem 0.75rem; border-radius: 12px; background: #21262d; }
.msg.mine .msg-content { background: #238636; border-bottom-right-radius: 4px; }
.msg.other .msg-content { border-bottom-left-radius: 4px; }
.msg-text { white-space: pre-wrap; font-size: 0.95rem; line-height: 1.4; }
.msg-files { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
.msg-file { display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.6rem; background: rgba(0,0,0,0.2); border-radius: 8px; font-size: 0.85rem; text-decoration: none; color: inherit; }
.msg-file:hover { background: rgba(0,0,0,0.3); }
.msg-file img { max-width: 120px; max-height: 100px; border-radius: 6px; }
.msg-status { font-size: 0.7rem; color: #8b949e; margin-top: 0.15rem; }
.msg.mine .msg-status { text-align: right; }

.typing { font-size: 0.85rem; color: #8b949e; font-style: italic; padding: 0.25rem 0; }
.typing.hidden { display: none; }

/* Input */
#messageForm { padding: 0.75rem 1rem; border-top: 1px solid #21262d; background: #161b22; }
.input-row { display: flex; gap: 0.5rem; align-items: center; }
#messageInput { flex: 1; padding: 0.6rem 0.9rem; border-radius: 8px; border: 1px solid #30363d; background: #21262d; color: inherit; font-size: 1rem; }
#messageInput:focus { outline: none; border-color: #58a6ff; }
#messageForm button[type="submit"] { padding: 0.6rem 1rem; border-radius: 8px; border: none; background: #238636; color: white; font-weight: 600; cursor: pointer; }

/* Emoji picker */
.emoji-picker { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); max-width: 320px; background: #21262d; border-radius: 12px; padding: 0.5rem; border: 1px solid #30363d; max-height: 180px; overflow-y: auto; z-index: 100; }
.emoji-picker.hidden { display: none; }
.emoji-grid { display: flex; flex-wrap: wrap; gap: 0.25rem; }
.emoji-grid span { font-size: 1.4rem; padding: 0.25rem; cursor: pointer; border-radius: 6px; }
.emoji-grid span:hover { background: #30363d; }
